import{u as S,g as A,h as B,r as m,i as F,k as O,j as e,P as l,L as u,l as C,m as H,n as N,o as w,q as D,T as c,s as U,t as h,F as G,I as f,v as W,w as q,E as Q,D as _,C as z,d as J,e as K}from"./strapi-C46Ei97l.js";import{u as X,a as Y,b as Z,g as a}from"./getTrad-D9juLfq6-Dffbx__R.js";const te=()=>{const{formatMessage:s}=S(),{toggleNotification:i}=A(),{formatAPIError:x}=B(),{data:t,isLoading:P,isError:b}=X(),[R]=Y(),[y]=Z(),[d,g]=m.useState(!1),[p,M]=m.useState(),{allowedActions:o,isLoading:L}=F(O),$=P||L,T=4,k=(t?.docVersions?.length||0)+1,I=n=>{R({version:n}).unwrap().then(()=>{i({type:"success",message:s({id:a("notification.generate.success"),defaultMessage:"Successfully generated documentation"})})}).catch(r=>{i({type:"warning",message:x(r)})})},V=async()=>{p&&(await y({version:p}).unwrap().then(()=>{i({type:"success",message:s({id:a("notification.delete.success"),defaultMessage:"Successfully deleted documentation"})})}).catch(n=>{i({type:"warning",message:x(n)})}),g(!d))},E=n=>{M(n),g(!d)},j=s({id:a("plugin.name"),defaultMessage:"Documentation"});return $?e.jsx(l.Loading,{}):b?e.jsx(l.Error,{}):e.jsxs(u.Root,{children:[e.jsx(l.Title,{children:j}),e.jsxs(l.Main,{children:[e.jsx(u.Header,{title:j,subtitle:s({id:a("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.jsx(ee,{disabled:!o.canRead||!t?.currentVersion||!t?.prefix,href:v(`${t?.prefix}/v${t?.currentVersion}`),startIcon:e.jsx(C,{}),children:s({id:a("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),e.jsx(u.Content,{children:t?.docVersions.length?e.jsxs(H,{colCount:T,rowCount:k,children:[e.jsx(N,{children:e.jsxs(w,{children:[e.jsx(D,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:s({id:a("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),e.jsx(D,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:s({id:a("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),e.jsx(U,{children:t.docVersions.slice(0).sort((n,r)=>n.generatedDate<r.generatedDate?1:-1).map(n=>e.jsxs(w,{children:[e.jsx(h,{width:"50%",children:e.jsx(c,{children:n.version})}),e.jsx(h,{width:"50%",children:e.jsx(c,{children:n.generatedDate})}),e.jsx(h,{children:e.jsxs(G,{justifyContent:"end",onClick:r=>r.stopPropagation(),children:[e.jsx(f,{tag:"a",disabled:!o.canRead,href:v(`${t.prefix}/v${n.version}`),variant:"ghost",target:"_blank",rel:"noopener noreferrer",label:s({id:a("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${n.version}`}),children:e.jsx(C,{})}),o.canRegenerate?e.jsx(f,{onClick:()=>I(n.version),variant:"ghost",label:s({id:a("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${n.version}`}),children:e.jsx(W,{})}):null,o.canUpdate&&n.version!==t.currentVersion?e.jsx(f,{onClick:()=>E(n.version),variant:"ghost",label:s({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${n.version}`}),children:e.jsx(q,{})}):null]})})]},n.version))})]}):e.jsx(Q,{content:"",icon:null})}),e.jsx(_.Root,{open:d,onOpenChange:g,children:e.jsx(z,{onConfirm:V})})]})]})},ee=J(K)`
  text-decoration: none;
`,v=s=>s.startsWith("http")?s:s.startsWith("/")?`${window.strapi.backendURL}${s}`:`${window.strapi.backendURL}/${s}`;export{te as App};
